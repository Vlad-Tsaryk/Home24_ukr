{% extends 'layout/basic.html' %}
{% load static %}
{% block head %}
<link href="{% static 'admin_panel/plugins/iCheck/flat/blue.css' %}" rel="stylesheet">
{% endblock %}
{% block content %}


    <div class="row">
        <!--<div class="col-xs-12 col-sm-6">-->
        <!--<h2 class="page-header">Владельцы квартир</h2>-->
        <!--</div>-->
        <div class="col-xs-12">

            <div class="pull-right margin-bottom">
                <a class="btn btn-success" href="{% url 'message_create' %}">Отправить сообщение</a>
            </div>
        </div>
    </div>
    <div class="box">
        <div class="box-header with-border">
            <h3 class="box-title"></h3>

            <div class="box-tools pull-right">
                <div class="has-feedback">
                    <form action="" method="get">
                        <input type="text" name="search" value="" class="form-control input-sm" placeholder="Поиск">
                        <span class="glyphicon glyphicon-search form-control-feedback"></span>
                    </form>
                </div>
            </div>
        </div>
        <div class="box-body no-padding">

            <div id="w0" class="grid-view">
                <div class="mailbox-controls">
                    <button type="button" class="btn btn-default btn-sm checkbox-toggle"><i class="fa fa-square-o"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-sm delete-many"><i class="fa fa-trash-o"></i>
                    </button>
                    <div class="pull-right">
                        <ul class="pagination pagination-sm no-margin pull-right">
                            <li class="prev disabled"><span>«</span></li>
                            <li class="active"><a href="/admin/message/index?page=1&amp;per-page=50" data-page="0">1</a>
                            </li>
                            <li><a href="/admin/message/index?page=2&amp;per-page=50" data-page="1">2</a></li>
                            <li class="next"><a href="/admin/message/index?page=2&amp;per-page=50" data-page="1">»</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="table-responsive mailbox-messages">
                    <table class="table table-hover table-striped linkedRow">
                        <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th style="min-width: 200px">Получатели</th>
                            <th>Текст</th>
                            <th style="width: 135px; min-width: 135px">Дата</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for message in message_list %}
                        <tr data-href="/admin/message/264" data-key="264">
                            <td>
                                <input type="checkbox" name="selection[]" value="264"
                                                                  style="position: absolute; opacity: 0;">
{#                                <div class="icheckbox_flat-blue" style="position: relative;" aria-checked="false"#}
{#                                     aria-disabled="false">#}
{#                                    <ins class="iCheck-helper"#}
{#                                         style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px none; opacity: 0;"></ins>#}
{#                                </div>#}
                            </td>
                            <td><a href="{% url 'message_view' message.pk %}">{{ message.get_receiver_label}}</a></td>
                            <td><strong>{{ message.subject }}</strong> - {{message.text|striptags}}</td>
                            <td>{{ message.created|date:'d.m.Y - H:m' }}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="mailbox-controls">
                    <button type="button" class="btn btn-default btn-sm checkbox-toggle"><i class="fa fa-square-o"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-sm delete-many"><i class="fa fa-trash-o"></i>
                    </button>
                    <div class="pull-right">
                        <ul class="pagination pagination-sm no-margin pull-right">
                            <li class="prev disabled"><span>«</span></li>
                            <li class="active"><a href="/admin/message/index?page=1&amp;per-page=50" data-page="0">1</a>
                            </li>
                            <li><a href="/admin/message/index?page=2&amp;per-page=50" data-page="1">2</a></li>
                            <li class="next"><a href="/admin/message/index?page=2&amp;per-page=50" data-page="1">»</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}
{% block scripts %}
    <script src="{% static 'admin_panel/plugins/iCheck/icheck.min.js' %}"></script>
<script>
//Enable iCheck plugin for checkboxes
    //iCheck for checkbox and radio inputs
    $('.mailbox-messages input[type="checkbox"]').iCheck({
        checkboxClass: 'icheckbox_flat-blue',
        radioClass: 'iradio_flat-blue'
    });

    //Enable check and uncheck all functionality
    $(".checkbox-toggle").click(function () {
        var clicks = $(this).data('clicks');
        if (clicks) {
            //Uncheck all checkboxes
            $(".mailbox-messages input[type='checkbox']").iCheck("uncheck");
            $(".checkbox-toggle > .fa").removeClass("fa-check-square-o").addClass('fa-square-o');
        } else {
            //Check all checkboxes
            $(".mailbox-messages input[type='checkbox']").iCheck("check");
            $(".checkbox-toggle > .fa").removeClass("fa-square-o").addClass('fa-check-square-o');
        }
        $(this).data("clicks", !clicks);
    });
</script>
{% endblock %}